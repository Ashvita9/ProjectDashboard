{"ast":null,"code":"/**\r\n * Axios API Configuration\r\n * Central axios instance with interceptors for:\r\n * - Automatic token injection in requests\r\n * - Global error handling in responses\r\n * - Notification system integration\r\n */\n\nimport axios from 'axios';\nimport store from '../store';\nimport eventBus from '../bus/eventBus';\n\n/**\r\n * Create axios instance with default configuration\r\n * All API calls will use this configured instance\r\n */\nconst apiClient = axios.create({\n  // Base URL from environment variable or fallback to placeholder API\n  baseURL: process.env.VUE_APP_API_URL || 'https://jsonplaceholder.typicode.com',\n  // Request timeout in milliseconds\n  timeout: 10000,\n  // Default headers for all requests\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n/**\r\n * Request Interceptor\r\n * Runs before every request is sent\r\n * Automatically adds authentication token to headers\r\n */\napiClient.interceptors.request.use(config => {\n  // Get token from Vuex store\n  const token = store.state.auth.token;\n  // If token exists, add to Authorization header\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  // Handle request errors\n  return Promise.reject(error);\n});\n\n/**\r\n * Response Interceptor\r\n * Runs after every response is received\r\n * Handles errors globally and shows notifications via event bus\r\n */\napiClient.interceptors.response.use(response => {\n  // Success response - pass through unchanged\n  return response;\n}, error => {\n  // Error response - handle different scenarios\n\n  if (error.response) {\n    // Server responded with error status\n    const status = error.response.status;\n    const message = error.response.data.message || 'An error occurred';\n\n    // Handle different HTTP status codes\n    switch (status) {\n      case 401:\n        // Unauthorized - token expired or invalid\n        // Logout user and redirect to login\n        store.dispatch('auth/logout');\n        eventBus.$emit('show-notification', {\n          message: 'Session expired. Please login again.',\n          variant: 'danger'\n        });\n        window.location.href = '/login';\n        break;\n      case 403:\n        // Forbidden - user doesn't have permission\n        eventBus.$emit('show-notification', {\n          message: 'Access forbidden',\n          variant: 'warning'\n        });\n        break;\n      case 404:\n        // Not Found - resource doesn't exist\n        eventBus.$emit('show-notification', {\n          message: 'Resource not found',\n          variant: 'warning'\n        });\n        break;\n      case 500:\n        // Internal Server Error\n        eventBus.$emit('show-notification', {\n          message: 'Server error. Please try again later.',\n          variant: 'danger'\n        });\n        break;\n      default:\n        // Other errors - show custom message\n        eventBus.$emit('show-notification', {\n          message: message,\n          variant: 'danger'\n        });\n    }\n  } else if (error.request) {\n    // Request was made but no response received\n    // Usually network errors or timeout\n    eventBus.$emit('show-notification', {\n      message: 'Network error. Please check your connection.',\n      variant: 'danger'\n    });\n  } else {\n    // Something happened in setting up the request\n    eventBus.$emit('show-notification', {\n      message: error.message,\n      variant: 'danger'\n    });\n  }\n\n  // Reject promise so component can handle error if needed\n  return Promise.reject(error);\n});\n\n// Export configured axios instance\nexport default apiClient;","map":{"version":3,"names":["axios","store","eventBus","apiClient","create","baseURL","process","env","VUE_APP_API_URL","timeout","headers","interceptors","request","use","config","token","state","auth","Authorization","error","Promise","reject","response","status","message","data","dispatch","$emit","variant","window","location","href"],"sources":["E:/HIRE3X/Training/Day12/project-dashboard/src/services/api.js"],"sourcesContent":["/**\r\n * Axios API Configuration\r\n * Central axios instance with interceptors for:\r\n * - Automatic token injection in requests\r\n * - Global error handling in responses\r\n * - Notification system integration\r\n */\r\n\r\nimport axios from 'axios'\r\nimport store from '../store'\r\nimport eventBus from '../bus/eventBus'\r\n\r\n/**\r\n * Create axios instance with default configuration\r\n * All API calls will use this configured instance\r\n */\r\nconst apiClient = axios.create({\r\n  // Base URL from environment variable or fallback to placeholder API\r\n  baseURL: process.env.VUE_APP_API_URL || 'https://jsonplaceholder.typicode.com',\r\n  // Request timeout in milliseconds\r\n  timeout: 10000,\r\n  // Default headers for all requests\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\n/**\r\n * Request Interceptor\r\n * Runs before every request is sent\r\n * Automatically adds authentication token to headers\r\n */\r\napiClient.interceptors.request.use(\r\n  config => {\r\n    // Get token from Vuex store\r\n    const token = store.state.auth.token\r\n    // If token exists, add to Authorization header\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    // Handle request errors\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n/**\r\n * Response Interceptor\r\n * Runs after every response is received\r\n * Handles errors globally and shows notifications via event bus\r\n */\r\napiClient.interceptors.response.use(\r\n  response => {\r\n    // Success response - pass through unchanged\r\n    return response\r\n  },\r\n  error => {\r\n    // Error response - handle different scenarios\r\n    \r\n    if (error.response) {\r\n      // Server responded with error status\r\n      const status = error.response.status\r\n      const message = error.response.data.message || 'An error occurred'\r\n      \r\n      // Handle different HTTP status codes\r\n      switch (status) {\r\n        case 401:\r\n          // Unauthorized - token expired or invalid\r\n          // Logout user and redirect to login\r\n          store.dispatch('auth/logout')\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Session expired. Please login again.',\r\n            variant: 'danger'\r\n          })\r\n          window.location.href = '/login'\r\n          break\r\n          \r\n        case 403:\r\n          // Forbidden - user doesn't have permission\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Access forbidden',\r\n            variant: 'warning'\r\n          })\r\n          break\r\n          \r\n        case 404:\r\n          // Not Found - resource doesn't exist\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Resource not found',\r\n            variant: 'warning'\r\n          })\r\n          break\r\n          \r\n        case 500:\r\n          // Internal Server Error\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Server error. Please try again later.',\r\n            variant: 'danger'\r\n          })\r\n          break\r\n          \r\n        default:\r\n          // Other errors - show custom message\r\n          eventBus.$emit('show-notification', {\r\n            message: message,\r\n            variant: 'danger'\r\n          })\r\n      }\r\n    } else if (error.request) {\r\n      // Request was made but no response received\r\n      // Usually network errors or timeout\r\n      eventBus.$emit('show-notification', {\r\n        message: 'Network error. Please check your connection.',\r\n        variant: 'danger'\r\n      })\r\n    } else {\r\n      // Something happened in setting up the request\r\n      eventBus.$emit('show-notification', {\r\n        message: error.message,\r\n        variant: 'danger'\r\n      })\r\n    }\r\n    \r\n    // Reject promise so component can handle error if needed\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Export configured axios instance\r\nexport default apiClient\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}