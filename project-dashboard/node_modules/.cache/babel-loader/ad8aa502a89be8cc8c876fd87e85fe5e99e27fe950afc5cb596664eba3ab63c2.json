{"ast":null,"code":"// Import Vuelidate validators for form validation\nimport { required } from 'vuelidate/lib/validators';\n// Import event bus for global notifications\nimport eventBus from '../../bus/eventBus';\nexport default {\n  name: 'ProjectFormModal',\n  // Props received from parent component\n  props: {\n    // Modal ID for programmatic control (useful when multiple modals exist)\n    modalId: {\n      type: String,\n      default: 'project-modal'\n    },\n    // Project object for edit mode (null for create mode)\n    project: {\n      type: Object,\n      default: null\n    }\n  },\n  // Component's local state\n  data() {\n    return {\n      // Form data object bound to input fields\n      form: {\n        name: '',\n        description: '',\n        status: 'Planning',\n        startDate: '',\n        endDate: ''\n      },\n      // Available status options for the dropdown\n      statusOptions: ['Planning', 'In Progress', 'Completed', 'On Hold']\n    };\n  },\n  // Vuelidate validation rules\n  validations: {\n    form: {\n      name: {\n        required\n      },\n      // Name is required\n      description: {\n        required\n      } // Description is required\n    }\n  },\n  // Computed properties (reactive derived values)\n  computed: {\n    // Determine if modal is in edit mode (true) or create mode (false)\n    isEdit() {\n      return !!this.project;\n    }\n  },\n  // Watchers - react to data changes\n  watch: {\n    // Watch for project prop changes to populate form in edit mode\n    project: {\n      immediate: true,\n      // Run handler immediately on component creation\n      handler(val) {\n        // If project exists, populate form with project data\n        if (val) {\n          this.form = {\n            ...val\n          };\n        }\n      }\n    }\n  },\n  // Component methods\n  methods: {\n    /**\r\n     * Validate field state for Bootstrap Vue styling\r\n     * Returns true (valid), false (invalid), or null (untouched)\r\n     */\n    validateState(name) {\n      const {\n        $dirty,\n        $error\n      } = this.$v.form[name];\n      return $dirty ? !$error : null;\n    },\n    /**\r\n     * Handle form submission\r\n     * Validates form, dispatches Vuex action, emits event bus notification\r\n     */\n    handleSubmit(bvModalEvent) {\n      // Prevent default modal OK behavior\n      bvModalEvent.preventDefault();\n\n      // Mark all fields as touched to show validation errors\n      this.$v.$touch();\n\n      // Stop if form is invalid\n      if (this.$v.$invalid) {\n        return;\n      }\n\n      // Prepare project data object\n      const projectData = {\n        ...this.form,\n        // Use existing ID for edit, generate new for create\n        id: this.isEdit ? this.form.id : Date.now(),\n        // Preserve existing tasks in edit mode, empty array for new\n        tasks: this.isEdit ? this.form.tasks : [],\n        // Preserve creation date in edit mode, set current for new\n        createdAt: this.isEdit ? this.form.createdAt : new Date().toISOString()\n      };\n\n      // Dispatch appropriate Vuex action based on mode\n      if (this.isEdit) {\n        // Update existing project in store\n        this.$store.dispatch('projects/updateProject', projectData);\n        // Emit notification via event bus\n        eventBus.$emit('show-notification', {\n          message: 'Project updated successfully',\n          variant: 'success'\n        });\n      } else {\n        // Add new project to store\n        this.$store.dispatch('projects/addProject', projectData);\n        // Emit notification via event bus\n        eventBus.$emit('show-notification', {\n          message: 'Project created successfully',\n          variant: 'success'\n        });\n      }\n\n      // Emit event to parent component with saved project data\n      this.$emit('project-saved', projectData);\n\n      // Hide modal after DOM update\n      this.$nextTick(() => {\n        this.$bvModal.hide(this.modalId);\n      });\n    },\n    /**\r\n     * Reset form to initial state\r\n     * Called when modal is hidden\r\n     */\n    resetForm() {\n      // Reset form fields to default values\n      this.form = {\n        name: '',\n        description: '',\n        status: 'Planning',\n        startDate: '',\n        endDate: ''\n      };\n      // Reset validation state\n      this.$v.$reset();\n      // Emit event to parent to clear selected project\n      this.$emit('modal-closed');\n    }\n  }\n};","map":{"version":3,"names":["required","eventBus","name","props","modalId","type","String","default","project","Object","data","form","description","status","startDate","endDate","statusOptions","validations","computed","isEdit","watch","immediate","handler","val","methods","validateState","$dirty","$error","$v","handleSubmit","bvModalEvent","preventDefault","$touch","$invalid","projectData","id","Date","now","tasks","createdAt","toISOString","$store","dispatch","$emit","message","variant","$nextTick","$bvModal","hide","resetForm","$reset"],"sources":["src/components/Project/ProjectFormModal.vue"],"sourcesContent":["<!-- \r\n  ProjectFormModal Component\r\n  A reusable modal component for creating and editing projects\r\n  Uses BootstrapVue modal with form validation via Vuelidate\r\n-->\r\n<template>\r\n  <!-- Modal component with dynamic title based on edit/create mode -->\r\n  <b-modal\r\n    :id=\"modalId\"\r\n    :title=\"isEdit ? 'Edit Project' : 'Create New Project'\"\r\n    @hidden=\"resetForm\"\r\n    @ok=\"handleSubmit\"\r\n  >\r\n    <!-- Project form with validation -->\r\n    <b-form>\r\n      <!-- Project Name Field (Required) -->\r\n      <b-form-group label=\"Project Name\" label-for=\"project-name\">\r\n        <b-form-input\r\n          id=\"project-name\"\r\n          v-model=\"form.name\"\r\n          placeholder=\"Enter project name\"\r\n          :state=\"validateState('name')\"\r\n          @blur=\"$v.form.name.$touch()\"\r\n        ></b-form-input>\r\n        <!-- Validation error message -->\r\n        <b-form-invalid-feedback v-if=\"!$v.form.name.required\">\r\n          Project name is required\r\n        </b-form-invalid-feedback>\r\n      </b-form-group>\r\n\r\n      <!-- Project Description Field (Required) -->\r\n      <b-form-group label=\"Description\" label-for=\"project-description\">\r\n        <b-form-textarea\r\n          id=\"project-description\"\r\n          v-model=\"form.description\"\r\n          placeholder=\"Enter project description\"\r\n          rows=\"3\"\r\n          :state=\"validateState('description')\"\r\n          @blur=\"$v.form.description.$touch()\"\r\n        ></b-form-textarea>\r\n        <!-- Validation error message -->\r\n        <b-form-invalid-feedback v-if=\"!$v.form.description.required\">\r\n          Description is required\r\n        </b-form-invalid-feedback>\r\n      </b-form-group>\r\n\r\n      <!-- Project Status Field (Dropdown) -->\r\n      <b-form-group label=\"Status\" label-for=\"project-status\">\r\n        <b-form-select\r\n          id=\"project-status\"\r\n          v-model=\"form.status\"\r\n          :options=\"statusOptions\"\r\n        ></b-form-select>\r\n      </b-form-group>\r\n\r\n      <!-- Start Date Field (Optional) -->\r\n      <b-form-group label=\"Start Date\" label-for=\"project-start-date\">\r\n        <b-form-input\r\n          id=\"project-start-date\"\r\n          v-model=\"form.startDate\"\r\n          type=\"date\"\r\n        ></b-form-input>\r\n      </b-form-group>\r\n\r\n      <!-- End Date Field (Optional) -->\r\n      <b-form-group label=\"End Date\" label-for=\"project-end-date\">\r\n        <b-form-input\r\n          id=\"project-end-date\"\r\n          v-model=\"form.endDate\"\r\n          type=\"date\"\r\n        ></b-form-input>\r\n      </b-form-group>\r\n    </b-form>\r\n  </b-modal>\r\n</template>\r\n\r\n<script>\r\n// Import Vuelidate validators for form validation\r\nimport { required } from 'vuelidate/lib/validators'\r\n// Import event bus for global notifications\r\nimport eventBus from '../../bus/eventBus'\r\n\r\nexport default {\r\n  name: 'ProjectFormModal',\r\n  \r\n  // Props received from parent component\r\n  props: {\r\n    // Modal ID for programmatic control (useful when multiple modals exist)\r\n    modalId: {\r\n      type: String,\r\n      default: 'project-modal'\r\n    },\r\n    // Project object for edit mode (null for create mode)\r\n    project: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  \r\n  // Component's local state\r\n  data() {\r\n    return {\r\n      // Form data object bound to input fields\r\n      form: {\r\n        name: '',\r\n        description: '',\r\n        status: 'Planning',\r\n        startDate: '',\r\n        endDate: ''\r\n      },\r\n      // Available status options for the dropdown\r\n      statusOptions: [\r\n        'Planning',\r\n        'In Progress',\r\n        'Completed',\r\n        'On Hold'\r\n      ]\r\n    }\r\n  },\r\n  \r\n  // Vuelidate validation rules\r\n  validations: {\r\n    form: {\r\n      name: { required },        // Name is required\r\n      description: { required }  // Description is required\r\n    }\r\n  },\r\n  \r\n  // Computed properties (reactive derived values)\r\n  computed: {\r\n    // Determine if modal is in edit mode (true) or create mode (false)\r\n    isEdit() {\r\n      return !!this.project\r\n    }\r\n  },\r\n  \r\n  // Watchers - react to data changes\r\n  watch: {\r\n    // Watch for project prop changes to populate form in edit mode\r\n    project: {\r\n      immediate: true,  // Run handler immediately on component creation\r\n      handler(val) {\r\n        // If project exists, populate form with project data\r\n        if (val) {\r\n          this.form = { ...val }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \r\n  // Component methods\r\n  methods: {\r\n    /**\r\n     * Validate field state for Bootstrap Vue styling\r\n     * Returns true (valid), false (invalid), or null (untouched)\r\n     */\r\n    validateState(name) {\r\n      const { $dirty, $error } = this.$v.form[name]\r\n      return $dirty ? !$error : null\r\n    },\r\n    \r\n    /**\r\n     * Handle form submission\r\n     * Validates form, dispatches Vuex action, emits event bus notification\r\n     */\r\n    handleSubmit(bvModalEvent) {\r\n      // Prevent default modal OK behavior\r\n      bvModalEvent.preventDefault()\r\n      \r\n      // Mark all fields as touched to show validation errors\r\n      this.$v.$touch()\r\n      \r\n      // Stop if form is invalid\r\n      if (this.$v.$invalid) {\r\n        return\r\n      }\r\n\r\n      // Prepare project data object\r\n      const projectData = {\r\n        ...this.form,\r\n        // Use existing ID for edit, generate new for create\r\n        id: this.isEdit ? this.form.id : Date.now(),\r\n        // Preserve existing tasks in edit mode, empty array for new\r\n        tasks: this.isEdit ? this.form.tasks : [],\r\n        // Preserve creation date in edit mode, set current for new\r\n        createdAt: this.isEdit ? this.form.createdAt : new Date().toISOString()\r\n      }\r\n\r\n      // Dispatch appropriate Vuex action based on mode\r\n      if (this.isEdit) {\r\n        // Update existing project in store\r\n        this.$store.dispatch('projects/updateProject', projectData)\r\n        // Emit notification via event bus\r\n        eventBus.$emit('show-notification', {\r\n          message: 'Project updated successfully',\r\n          variant: 'success'\r\n        })\r\n      } else {\r\n        // Add new project to store\r\n        this.$store.dispatch('projects/addProject', projectData)\r\n        // Emit notification via event bus\r\n        eventBus.$emit('show-notification', {\r\n          message: 'Project created successfully',\r\n          variant: 'success'\r\n        })\r\n      }\r\n\r\n      // Emit event to parent component with saved project data\r\n      this.$emit('project-saved', projectData)\r\n      \r\n      // Hide modal after DOM update\r\n      this.$nextTick(() => {\r\n        this.$bvModal.hide(this.modalId)\r\n      })\r\n    },\r\n    \r\n    /**\r\n     * Reset form to initial state\r\n     * Called when modal is hidden\r\n     */\r\n    resetForm() {\r\n      // Reset form fields to default values\r\n      this.form = {\r\n        name: '',\r\n        description: '',\r\n        status: 'Planning',\r\n        startDate: '',\r\n        endDate: ''\r\n      }\r\n      // Reset validation state\r\n      this.$v.$reset()\r\n      // Emit event to parent to clear selected project\r\n      this.$emit('modal-closed')\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AA6EA;AACA,SAAAA,QAAA;AACA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EAEA;EACAC,KAAA;IACA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACA;IACAC,OAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;EACA;EAEA;EACAG,KAAA;IACA;MACA;MACAC,IAAA;QACAT,IAAA;QACAU,WAAA;QACAC,MAAA;QACAC,SAAA;QACAC,OAAA;MACA;MACA;MACAC,aAAA,GACA,YACA,eACA,aACA;IAEA;EACA;EAEA;EACAC,WAAA;IACAN,IAAA;MACAT,IAAA;QAAAF;MAAA;MAAA;MACAY,WAAA;QAAAZ;MAAA;IACA;EACA;EAEA;EACAkB,QAAA;IACA;IACAC,OAAA;MACA,cAAAX,OAAA;IACA;EACA;EAEA;EACAY,KAAA;IACA;IACAZ,OAAA;MACAa,SAAA;MAAA;MACAC,QAAAC,GAAA;QACA;QACA,IAAAA,GAAA;UACA,KAAAZ,IAAA;YAAA,GAAAY;UAAA;QACA;MACA;IACA;EACA;EAEA;EACAC,OAAA;IACA;AACA;AACA;AACA;IACAC,cAAAvB,IAAA;MACA;QAAAwB,MAAA;QAAAC;MAAA,SAAAC,EAAA,CAAAjB,IAAA,CAAAT,IAAA;MACA,OAAAwB,MAAA,IAAAC,MAAA;IACA;IAEA;AACA;AACA;AACA;IACAE,aAAAC,YAAA;MACA;MACAA,YAAA,CAAAC,cAAA;;MAEA;MACA,KAAAH,EAAA,CAAAI,MAAA;;MAEA;MACA,SAAAJ,EAAA,CAAAK,QAAA;QACA;MACA;;MAEA;MACA,MAAAC,WAAA;QACA,QAAAvB,IAAA;QACA;QACAwB,EAAA,OAAAhB,MAAA,QAAAR,IAAA,CAAAwB,EAAA,GAAAC,IAAA,CAAAC,GAAA;QACA;QACAC,KAAA,OAAAnB,MAAA,QAAAR,IAAA,CAAA2B,KAAA;QACA;QACAC,SAAA,OAAApB,MAAA,QAAAR,IAAA,CAAA4B,SAAA,OAAAH,IAAA,GAAAI,WAAA;MACA;;MAEA;MACA,SAAArB,MAAA;QACA;QACA,KAAAsB,MAAA,CAAAC,QAAA,2BAAAR,WAAA;QACA;QACAjC,QAAA,CAAA0C,KAAA;UACAC,OAAA;UACAC,OAAA;QACA;MACA;QACA;QACA,KAAAJ,MAAA,CAAAC,QAAA,wBAAAR,WAAA;QACA;QACAjC,QAAA,CAAA0C,KAAA;UACAC,OAAA;UACAC,OAAA;QACA;MACA;;MAEA;MACA,KAAAF,KAAA,kBAAAT,WAAA;;MAEA;MACA,KAAAY,SAAA;QACA,KAAAC,QAAA,CAAAC,IAAA,MAAA5C,OAAA;MACA;IACA;IAEA;AACA;AACA;AACA;IACA6C,UAAA;MACA;MACA,KAAAtC,IAAA;QACAT,IAAA;QACAU,WAAA;QACAC,MAAA;QACAC,SAAA;QACAC,OAAA;MACA;MACA;MACA,KAAAa,EAAA,CAAAsB,MAAA;MACA;MACA,KAAAP,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}