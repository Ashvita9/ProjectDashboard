{"ast":null,"code":"import { required } from 'vuelidate/lib/validators';\nimport eventBus from '../../bus/eventBus';\nexport default {\n  name: 'TaskFormModal',\n  props: {\n    modalId: {\n      type: String,\n      default: 'task-modal'\n    },\n    task: {\n      type: Object,\n      default: null\n    },\n    projectId: {\n      type: [String, Number],\n      required: true\n    }\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        description: '',\n        status: 'Todo',\n        priority: 'Medium',\n        dueDate: ''\n      },\n      statusOptions: ['Todo', 'In Progress', 'Done'],\n      priorityOptions: ['Low', 'Medium', 'High']\n    };\n  },\n  validations: {\n    form: {\n      title: {\n        required\n      }\n    }\n  },\n  computed: {\n    isEdit() {\n      return !!this.task;\n    }\n  },\n  watch: {\n    task: {\n      immediate: true,\n      handler(val) {\n        if (val) {\n          this.form = {\n            ...val\n          };\n        }\n      }\n    }\n  },\n  methods: {\n    validateState(name) {\n      const {\n        $dirty,\n        $error\n      } = this.$v.form[name];\n      return $dirty ? !$error : null;\n    },\n    handleSubmit(bvModalEvent) {\n      bvModalEvent.preventDefault();\n      this.$v.$touch();\n      if (this.$v.$invalid) {\n        return;\n      }\n      const taskData = {\n        ...this.form,\n        id: this.isEdit ? this.form.id : Date.now(),\n        createdAt: this.isEdit ? this.form.createdAt : new Date().toISOString()\n      };\n      if (this.isEdit) {\n        this.$store.dispatch('projects/updateTask', {\n          projectId: this.projectId,\n          task: taskData\n        });\n        eventBus.$emit('show-notification', {\n          message: 'Task updated successfully',\n          variant: 'success'\n        });\n\n        // Emit event for task status change\n        if (this.task.status !== taskData.status) {\n          eventBus.$emit('show-notification', {\n            message: `Task status changed to \"${taskData.status}\"`,\n            variant: 'info'\n          });\n        }\n      } else {\n        this.$store.dispatch('projects/addTask', {\n          projectId: this.projectId,\n          task: taskData\n        });\n        eventBus.$emit('show-notification', {\n          message: 'Task added successfully',\n          variant: 'success'\n        });\n      }\n      this.$emit('task-saved', taskData);\n      this.$nextTick(() => {\n        this.$bvModal.hide(this.modalId);\n      });\n    },\n    resetForm() {\n      this.form = {\n        title: '',\n        description: '',\n        status: 'Todo',\n        priority: 'Medium',\n        dueDate: ''\n      };\n      this.$v.$reset();\n      this.$emit('modal-closed');\n    }\n  }\n};","map":{"version":3,"names":["required","eventBus","name","props","modalId","type","String","default","task","Object","projectId","Number","data","form","title","description","status","priority","dueDate","statusOptions","priorityOptions","validations","computed","isEdit","watch","immediate","handler","val","methods","validateState","$dirty","$error","$v","handleSubmit","bvModalEvent","preventDefault","$touch","$invalid","taskData","id","Date","now","createdAt","toISOString","$store","dispatch","$emit","message","variant","$nextTick","$bvModal","hide","resetForm","$reset"],"sources":["src/components/Task/TaskFormModal.vue"],"sourcesContent":["<template>\r\n  <b-modal\r\n    :id=\"modalId\"\r\n    :title=\"isEdit ? 'Edit Task' : 'Add New Task'\"\r\n    @hidden=\"resetForm\"\r\n    @ok=\"handleSubmit\"\r\n  >\r\n    <b-form>\r\n      <b-form-group label=\"Task Title\" label-for=\"task-title\">\r\n        <b-form-input\r\n          id=\"task-title\"\r\n          v-model=\"form.title\"\r\n          placeholder=\"Enter task title\"\r\n          :state=\"validateState('title')\"\r\n          @blur=\"$v.form.title.$touch()\"\r\n        ></b-form-input>\r\n        <b-form-invalid-feedback v-if=\"!$v.form.title.required\">\r\n          Task title is required\r\n        </b-form-invalid-feedback>\r\n      </b-form-group>\r\n\r\n      <b-form-group label=\"Description\" label-for=\"task-description\">\r\n        <b-form-textarea\r\n          id=\"task-description\"\r\n          v-model=\"form.description\"\r\n          placeholder=\"Enter task description\"\r\n          rows=\"3\"\r\n        ></b-form-textarea>\r\n      </b-form-group>\r\n\r\n      <b-form-group label=\"Status\" label-for=\"task-status\">\r\n        <b-form-select\r\n          id=\"task-status\"\r\n          v-model=\"form.status\"\r\n          :options=\"statusOptions\"\r\n        ></b-form-select>\r\n      </b-form-group>\r\n\r\n      <b-form-group label=\"Priority\" label-for=\"task-priority\">\r\n        <b-form-select\r\n          id=\"task-priority\"\r\n          v-model=\"form.priority\"\r\n          :options=\"priorityOptions\"\r\n        ></b-form-select>\r\n      </b-form-group>\r\n\r\n      <b-form-group label=\"Due Date\" label-for=\"task-due-date\">\r\n        <b-form-input\r\n          id=\"task-due-date\"\r\n          v-model=\"form.dueDate\"\r\n          type=\"date\"\r\n        ></b-form-input>\r\n      </b-form-group>\r\n    </b-form>\r\n  </b-modal>\r\n</template>\r\n\r\n<script>\r\nimport { required } from 'vuelidate/lib/validators'\r\nimport eventBus from '../../bus/eventBus'\r\n\r\nexport default {\r\n  name: 'TaskFormModal',\r\n  props: {\r\n    modalId: {\r\n      type: String,\r\n      default: 'task-modal'\r\n    },\r\n    task: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    projectId: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: '',\r\n        description: '',\r\n        status: 'Todo',\r\n        priority: 'Medium',\r\n        dueDate: ''\r\n      },\r\n      statusOptions: ['Todo', 'In Progress', 'Done'],\r\n      priorityOptions: ['Low', 'Medium', 'High']\r\n    }\r\n  },\r\n  validations: {\r\n    form: {\r\n      title: { required }\r\n    }\r\n  },\r\n  computed: {\r\n    isEdit() {\r\n      return !!this.task\r\n    }\r\n  },\r\n  watch: {\r\n    task: {\r\n      immediate: true,\r\n      handler(val) {\r\n        if (val) {\r\n          this.form = { ...val }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    validateState(name) {\r\n      const { $dirty, $error } = this.$v.form[name]\r\n      return $dirty ? !$error : null\r\n    },\r\n    handleSubmit(bvModalEvent) {\r\n      bvModalEvent.preventDefault()\r\n      this.$v.$touch()\r\n      \r\n      if (this.$v.$invalid) {\r\n        return\r\n      }\r\n\r\n      const taskData = {\r\n        ...this.form,\r\n        id: this.isEdit ? this.form.id : Date.now(),\r\n        createdAt: this.isEdit ? this.form.createdAt : new Date().toISOString()\r\n      }\r\n\r\n      if (this.isEdit) {\r\n        this.$store.dispatch('projects/updateTask', {\r\n          projectId: this.projectId,\r\n          task: taskData\r\n        })\r\n        eventBus.$emit('show-notification', {\r\n          message: 'Task updated successfully',\r\n          variant: 'success'\r\n        })\r\n        \r\n        // Emit event for task status change\r\n        if (this.task.status !== taskData.status) {\r\n          eventBus.$emit('show-notification', {\r\n            message: `Task status changed to \"${taskData.status}\"`,\r\n            variant: 'info'\r\n          })\r\n        }\r\n      } else {\r\n        this.$store.dispatch('projects/addTask', {\r\n          projectId: this.projectId,\r\n          task: taskData\r\n        })\r\n        eventBus.$emit('show-notification', {\r\n          message: 'Task added successfully',\r\n          variant: 'success'\r\n        })\r\n      }\r\n\r\n      this.$emit('task-saved', taskData)\r\n      this.$nextTick(() => {\r\n        this.$bvModal.hide(this.modalId)\r\n      })\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n        title: '',\r\n        description: '',\r\n        status: 'Todo',\r\n        priority: 'Medium',\r\n        dueDate: ''\r\n      }\r\n      this.$v.$reset()\r\n      this.$emit('modal-closed')\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AA0DA,SAAAA,QAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACAG,SAAA;MACAL,IAAA,GAAAC,MAAA,EAAAK,MAAA;MACAX,QAAA;IACA;EACA;EACAY,KAAA;IACA;MACAC,IAAA;QACAC,KAAA;QACAC,WAAA;QACAC,MAAA;QACAC,QAAA;QACAC,OAAA;MACA;MACAC,aAAA;MACAC,eAAA;IACA;EACA;EACAC,WAAA;IACAR,IAAA;MACAC,KAAA;QAAAd;MAAA;IACA;EACA;EACAsB,QAAA;IACAC,OAAA;MACA,cAAAf,IAAA;IACA;EACA;EACAgB,KAAA;IACAhB,IAAA;MACAiB,SAAA;MACAC,QAAAC,GAAA;QACA,IAAAA,GAAA;UACA,KAAAd,IAAA;YAAA,GAAAc;UAAA;QACA;MACA;IACA;EACA;EACAC,OAAA;IACAC,cAAA3B,IAAA;MACA;QAAA4B,MAAA;QAAAC;MAAA,SAAAC,EAAA,CAAAnB,IAAA,CAAAX,IAAA;MACA,OAAA4B,MAAA,IAAAC,MAAA;IACA;IACAE,aAAAC,YAAA;MACAA,YAAA,CAAAC,cAAA;MACA,KAAAH,EAAA,CAAAI,MAAA;MAEA,SAAAJ,EAAA,CAAAK,QAAA;QACA;MACA;MAEA,MAAAC,QAAA;QACA,QAAAzB,IAAA;QACA0B,EAAA,OAAAhB,MAAA,QAAAV,IAAA,CAAA0B,EAAA,GAAAC,IAAA,CAAAC,GAAA;QACAC,SAAA,OAAAnB,MAAA,QAAAV,IAAA,CAAA6B,SAAA,OAAAF,IAAA,GAAAG,WAAA;MACA;MAEA,SAAApB,MAAA;QACA,KAAAqB,MAAA,CAAAC,QAAA;UACAnC,SAAA,OAAAA,SAAA;UACAF,IAAA,EAAA8B;QACA;QACArC,QAAA,CAAA6C,KAAA;UACAC,OAAA;UACAC,OAAA;QACA;;QAEA;QACA,SAAAxC,IAAA,CAAAQ,MAAA,KAAAsB,QAAA,CAAAtB,MAAA;UACAf,QAAA,CAAA6C,KAAA;YACAC,OAAA,6BAAAT,QAAA,CAAAtB,MAAA;YACAgC,OAAA;UACA;QACA;MACA;QACA,KAAAJ,MAAA,CAAAC,QAAA;UACAnC,SAAA,OAAAA,SAAA;UACAF,IAAA,EAAA8B;QACA;QACArC,QAAA,CAAA6C,KAAA;UACAC,OAAA;UACAC,OAAA;QACA;MACA;MAEA,KAAAF,KAAA,eAAAR,QAAA;MACA,KAAAW,SAAA;QACA,KAAAC,QAAA,CAAAC,IAAA,MAAA/C,OAAA;MACA;IACA;IACAgD,UAAA;MACA,KAAAvC,IAAA;QACAC,KAAA;QACAC,WAAA;QACAC,MAAA;QACAC,QAAA;QACAC,OAAA;MACA;MACA,KAAAc,EAAA,CAAAqB,MAAA;MACA,KAAAP,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}