{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * Login Component\r\n * Handles user authentication with email and password\r\n * Features:\r\n * - Form validation (Vuelidate)\r\n * - DiceBear avatar generation based on username\r\n * - API integration via apiService\r\n * - Global notifications via eventBus\r\n */\n\nimport { required, email, minLength } from 'vuelidate/lib/validators';\nimport apiService from '../services/apiService';\nimport eventBus from '../bus/eventBus';\nexport default {\n  name: 'Login',\n  /**\r\n   * Component local state\r\n   * @returns {Object} Data object containing form and loading state\r\n   */\n  data() {\n    return {\n      // Form input values bound to template\n      form: {\n        email: '',\n        // User email address\n        password: '' // User password (min 6 characters)\n      },\n      // Loading flag for submit button state\n      loading: false\n    };\n  },\n  /**\r\n   * Vuelidate validation rules\r\n   * Validates form fields in real-time as user types\r\n   * Prevents form submission if validation fails\r\n   */\n  validations: {\n    form: {\n      email: {\n        required,\n        // Email must not be empty\n        email // Must be valid email format\n      },\n      password: {\n        required,\n        // Password must not be empty\n        minLength: minLength(6) // Password must be at least 6 characters\n      }\n    }\n  },\n  methods: {\n    /**\r\n     * Determines validation state for Bootstrap Vue styling\r\n     * Called on form field blur to show validation feedback\r\n     * @param {string} name - Field name (email or password)\r\n     * @returns {boolean|null} true if error, false if valid, null if untouched\r\n     */\n    validateState(name) {\n      const {\n        $dirty,\n        $error\n      } = this.$v.form[name];\n      return $dirty ? !$error : null;\n    },\n    /**\r\n     * Handle login form submission\r\n     * 1. Validates form using Vuelidate\r\n     * 2. Calls API service to authenticate\r\n     * 3. Generates DiceBear avatar based on username\r\n     * 4. Stores token and user data in Vuex store\r\n     * 5. Shows success notification\r\n     * 6. Redirects to dashboard\r\n     * @async\r\n     */\n    async handleLogin() {\n      // Mark all fields as touched to show validation errors\n      this.$v.$touch();\n\n      // Prevent submission if form has validation errors\n      if (this.$v.$invalid) {\n        return;\n      }\n\n      // Show loading state on submit button\n      this.loading = true;\n      try {\n        // Call API to authenticate user (apiService returns mock token)\n        const response = await apiService.login(this.form);\n        const {\n          token,\n          user\n        } = response.data;\n\n        // Generate unique DiceBear avatar URL based on username\n        // Uses email prefix as avatar seed for consistency\n        if (!user.avatar) {\n          const username = user.email.split('@')[0];\n          user.avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`;\n        }\n\n        // Commit login data to Vuex auth module (persists to localStorage)\n        await this.$store.dispatch('auth/login', {\n          token,\n          user\n        });\n\n        // Show success notification via global event bus\n        eventBus.$emit('show-notification', {\n          message: `Welcome back, ${user.name}!`,\n          variant: 'success'\n        });\n\n        // Redirect to dashboard (protected route)\n        this.$router.push('/dashboard');\n      } catch (error) {\n        // Show error notification if login fails\n        eventBus.$emit('show-notification', {\n          message: 'Login failed. Please try again.',\n          variant: 'danger'\n        });\n      } finally {\n        // Hide loading state regardless of success or failure\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["required","email","minLength","apiService","eventBus","name","data","form","password","loading","validations","methods","validateState","$dirty","$error","$v","handleLogin","$touch","$invalid","response","login","token","user","avatar","username","split","$store","dispatch","$emit","message","variant","$router","push","error"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <b-container>\r\n      <b-row class=\"justify-content-center align-items-center min-vh-100\">\r\n        <b-col md=\"6\" lg=\"5\">\r\n          <b-card class=\"login-card shadow-lg\">\r\n            <template #header>\r\n              <h3 class=\"text-center mb-0\">Project Management Portal</h3>\r\n            </template>\r\n\r\n            <b-form @submit.prevent=\"handleLogin\">\r\n              <b-form-group label=\"Email\" label-for=\"email\">\r\n                <b-form-input\r\n                  id=\"email\"\r\n                  v-model=\"form.email\"\r\n                  type=\"email\"\r\n                  placeholder=\"Enter your email\"\r\n                  :state=\"validateState('email')\"\r\n                  @blur=\"$v.form.email.$touch()\"\r\n                ></b-form-input>\r\n                <b-form-invalid-feedback v-if=\"!$v.form.email.required\">\r\n                  Email is required\r\n                </b-form-invalid-feedback>\r\n                <b-form-invalid-feedback v-if=\"!$v.form.email.email\">\r\n                  Please enter a valid email\r\n                </b-form-invalid-feedback>\r\n              </b-form-group>\r\n\r\n              <b-form-group label=\"Password\" label-for=\"password\">\r\n                <b-form-input\r\n                  id=\"password\"\r\n                  v-model=\"form.password\"\r\n                  type=\"password\"\r\n                  placeholder=\"Enter your password\"\r\n                  :state=\"validateState('password')\"\r\n                  @blur=\"$v.form.password.$touch()\"\r\n                ></b-form-input>\r\n                <b-form-invalid-feedback v-if=\"!$v.form.password.required\">\r\n                  Password is required\r\n                </b-form-invalid-feedback>\r\n                <b-form-invalid-feedback v-if=\"!$v.form.password.minLength\">\r\n                  Password must be at least 6 characters\r\n                </b-form-invalid-feedback>\r\n              </b-form-group>\r\n\r\n              <b-button\r\n                type=\"submit\"\r\n                variant=\"primary\"\r\n                block\r\n                :disabled=\"$v.$invalid || loading\"\r\n              >\r\n                <b-spinner small v-if=\"loading\"></b-spinner>\r\n                {{ loading ? 'Logging in...' : 'Login' }}\r\n              </b-button>\r\n            </b-form>\r\n\r\n            <div class=\"mt-3 text-center text-muted\">\r\n              <small>Demo: Use any email and password (min 6 chars)</small>\r\n            </div>\r\n\r\n            <!-- Registration Link -->\r\n            <div class=\"text-center mt-3\">\r\n              <p class=\"text-muted\">\r\n                Don't have an account?\r\n                <router-link to=\"/register\" class=\"register-link\">Sign Up</router-link>\r\n              </p>\r\n            </div>\r\n          </b-card>\r\n        </b-col>\r\n      </b-row>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * Login Component\r\n * Handles user authentication with email and password\r\n * Features:\r\n * - Form validation (Vuelidate)\r\n * - DiceBear avatar generation based on username\r\n * - API integration via apiService\r\n * - Global notifications via eventBus\r\n */\r\n\r\nimport { required, email, minLength } from 'vuelidate/lib/validators'\r\nimport apiService from '../services/apiService'\r\nimport eventBus from '../bus/eventBus'\r\n\r\nexport default {\r\n  name: 'Login',\r\n  \r\n  /**\r\n   * Component local state\r\n   * @returns {Object} Data object containing form and loading state\r\n   */\r\n  data() {\r\n    return {\r\n      // Form input values bound to template\r\n      form: {\r\n        email: '',      // User email address\r\n        password: ''    // User password (min 6 characters)\r\n      },\r\n      // Loading flag for submit button state\r\n      loading: false\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * Vuelidate validation rules\r\n   * Validates form fields in real-time as user types\r\n   * Prevents form submission if validation fails\r\n   */\r\n  validations: {\r\n    form: {\r\n      email: {\r\n        required,       // Email must not be empty\r\n        email           // Must be valid email format\r\n      },\r\n      password: {\r\n        required,       // Password must not be empty\r\n        minLength: minLength(6)  // Password must be at least 6 characters\r\n      }\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    /**\r\n     * Determines validation state for Bootstrap Vue styling\r\n     * Called on form field blur to show validation feedback\r\n     * @param {string} name - Field name (email or password)\r\n     * @returns {boolean|null} true if error, false if valid, null if untouched\r\n     */\r\n    validateState(name) {\r\n      const { $dirty, $error } = this.$v.form[name]\r\n      return $dirty ? !$error : null\r\n    },\r\n    \r\n    /**\r\n     * Handle login form submission\r\n     * 1. Validates form using Vuelidate\r\n     * 2. Calls API service to authenticate\r\n     * 3. Generates DiceBear avatar based on username\r\n     * 4. Stores token and user data in Vuex store\r\n     * 5. Shows success notification\r\n     * 6. Redirects to dashboard\r\n     * @async\r\n     */\r\n    async handleLogin() {\r\n      // Mark all fields as touched to show validation errors\r\n      this.$v.$touch()\r\n      \r\n      // Prevent submission if form has validation errors\r\n      if (this.$v.$invalid) {\r\n        return\r\n      }\r\n\r\n      // Show loading state on submit button\r\n      this.loading = true\r\n      \r\n      try {\r\n        // Call API to authenticate user (apiService returns mock token)\r\n        const response = await apiService.login(this.form)\r\n        const { token, user } = response.data\r\n\r\n        // Generate unique DiceBear avatar URL based on username\r\n        // Uses email prefix as avatar seed for consistency\r\n        if (!user.avatar) {\r\n          const username = user.email.split('@')[0]\r\n          user.avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`\r\n        }\r\n\r\n        // Commit login data to Vuex auth module (persists to localStorage)\r\n        await this.$store.dispatch('auth/login', { token, user })\r\n        \r\n        // Show success notification via global event bus\r\n        eventBus.$emit('show-notification', {\r\n          message: `Welcome back, ${user.name}!`,\r\n          variant: 'success'\r\n        })\r\n\r\n        // Redirect to dashboard (protected route)\r\n        this.$router.push('/dashboard')\r\n      } catch (error) {\r\n        // Show error notification if login fails\r\n        eventBus.$emit('show-notification', {\r\n          message: 'Login failed. Please try again.',\r\n          variant: 'danger'\r\n        })\r\n      } finally {\r\n        // Hide loading state regardless of success or failure\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  /* Claymorphism gradient background with pastel colors */\r\n  background: linear-gradient(135deg, #D4C5F9 0%, #FFD1DC 50%, #B8D8F2 100%);\r\n  min-height: 100vh;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Ensure foreground content sits above decorative layers */\r\n.login-container > .container,\r\n.login-container > .b-container,\r\n.login-container .register-container,\r\n.login-container .shadow-lg {\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n/* Animated background elements for depth */\r\n.login-container::before {\r\n  content: '';\r\n  position: absolute;\r\n  width: 500px;\r\n  height: 500px;\r\n  background: radial-gradient(circle, rgba(212, 197, 249, 0.35) 0%, transparent 70%);\r\n  border-radius: 50%;\r\n  top: -250px;\r\n  left: -250px;\r\n  animation: float 20s ease-in-out infinite;\r\n  z-index: 0; /* keep behind content */\r\n  pointer-events: none;\r\n}\r\n\r\n.login-container::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 400px;\r\n  height: 400px;\r\n  background: radial-gradient(circle, rgba(184, 216, 242, 0.25) 0%, transparent 70%);\r\n  border-radius: 50%;\r\n  bottom: -200px;\r\n  right: -200px;\r\n  animation: float 15s ease-in-out infinite reverse;\r\n  z-index: 0; /* keep behind content */\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes float {\r\n  0%, 100% {\r\n    transform: translate(0, 0) scale(1);\r\n  }\r\n  50% {\r\n    transform: translate(50px, 50px) scale(1.08);\r\n  }\r\n}\r\n\r\n.register-link {\r\n  color: #34495e; /* darker link for contrast */\r\n  font-weight: 600;\r\n  text-decoration: none;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.register-link:hover {\r\n  color: #2c3e50;\r\n  text-decoration: underline;\r\n}\r\n\r\n/* Stronger card background to ensure visibility over gradient */\r\n.login-card {\r\n  background: rgba(255, 255, 255, 0.92) !important;\r\n  color: #2c3e50 !important;\r\n  border-radius: 16px !important;\r\n}\r\n</style>\r\n"],"mappings":";AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAAA,QAAA,EAAAC,KAAA,EAAAC,SAAA;AACA,OAAAC,UAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EAEA;AACA;AACA;AACA;EACAC,KAAA;IACA;MACA;MACAC,IAAA;QACAN,KAAA;QAAA;QACAO,QAAA;MACA;MACA;MACAC,OAAA;IACA;EACA;EAEA;AACA;AACA;AACA;AACA;EACAC,WAAA;IACAH,IAAA;MACAN,KAAA;QACAD,QAAA;QAAA;QACAC,KAAA;MACA;MACAO,QAAA;QACAR,QAAA;QAAA;QACAE,SAAA,EAAAA,SAAA;MACA;IACA;EACA;EAEAS,OAAA;IACA;AACA;AACA;AACA;AACA;AACA;IACAC,cAAAP,IAAA;MACA;QAAAQ,MAAA;QAAAC;MAAA,SAAAC,EAAA,CAAAR,IAAA,CAAAF,IAAA;MACA,OAAAQ,MAAA,IAAAC,MAAA;IACA;IAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA,MAAAE,YAAA;MACA;MACA,KAAAD,EAAA,CAAAE,MAAA;;MAEA;MACA,SAAAF,EAAA,CAAAG,QAAA;QACA;MACA;;MAEA;MACA,KAAAT,OAAA;MAEA;QACA;QACA,MAAAU,QAAA,SAAAhB,UAAA,CAAAiB,KAAA,MAAAb,IAAA;QACA;UAAAc,KAAA;UAAAC;QAAA,IAAAH,QAAA,CAAAb,IAAA;;QAEA;QACA;QACA,KAAAgB,IAAA,CAAAC,MAAA;UACA,MAAAC,QAAA,GAAAF,IAAA,CAAArB,KAAA,CAAAwB,KAAA;UACAH,IAAA,CAAAC,MAAA,sDAAAC,QAAA;QACA;;QAEA;QACA,WAAAE,MAAA,CAAAC,QAAA;UAAAN,KAAA;UAAAC;QAAA;;QAEA;QACAlB,QAAA,CAAAwB,KAAA;UACAC,OAAA,mBAAAP,IAAA,CAAAjB,IAAA;UACAyB,OAAA;QACA;;QAEA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA,SAAAC,KAAA;QACA;QACA7B,QAAA,CAAAwB,KAAA;UACAC,OAAA;UACAC,OAAA;QACA;MACA;QACA;QACA,KAAArB,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}