{"ast":null,"code":"/**\r\n * Axios API Configuration\r\n * \r\n * Central axios instance with global interceptors for:\r\n * 1. Automatic token injection into every request header\r\n * 2. Global error handling and response processing\r\n * 3. Notification system integration for API errors\r\n * \r\n * This configured instance is used by apiService.js for all API calls\r\n * \r\n * Request Flow:\r\n * 1. Request created in apiService.js\r\n * 2. interceptors.request.use() adds auth token\r\n * 3. HTTP request sent to backend\r\n * 4. Response received\r\n * 5. interceptors.response.use() handles response/errors\r\n * 6. Data returned to component or error thrown\r\n * \r\n * Features:\r\n * - Automatic Bearer token injection from Vuex auth store\r\n * - Standardized error handling with HTTP status codes\r\n * - Event bus notifications for API errors\r\n * - Request timeout of 10 seconds\r\n * - JSON content type for all requests\r\n */\n\nimport axios from 'axios';\nimport store from '../store';\nimport eventBus from '../bus/eventBus';\n\n/**\r\n * Create axios instance with default configuration\r\n * All HTTP requests made through apiService.js will use this configured instance\r\n * \r\n * Configuration:\r\n * - baseURL: API endpoint (from environment variable or placeholder)\r\n * - timeout: 10 second timeout per request\r\n * - headers: JSON content type for all requests\r\n */\nconst apiClient = axios.create({\n  // Base URL for all API requests (use environment variable in production)\n  baseURL: process.env.VUE_APP_API_URL || 'https://jsonplaceholder.typicode.com',\n  // Request timeout in milliseconds (10 seconds)\n  timeout: 10000,\n  // Default headers for all requests\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n/**\r\n * Request Interceptor\r\n * \r\n * Runs BEFORE every request is sent to the server\r\n * Purpose: Add authentication token to request headers\r\n * \r\n * Flow:\r\n * 1. Get token from Vuex auth state\r\n * 2. If token exists, add \"Authorization: Bearer <token>\" header\r\n * 3. Return modified config to proceed with request\r\n * 4. If error occurs before request, reject the promise\r\n * \r\n * @param {Object} config - Request configuration from axios\r\n * @returns {Object} Modified config with Authorization header (if token exists)\r\n */\napiClient.interceptors.request.use(config => {\n  // Retrieve authentication token from Vuex store (auth module)\n  const token = store.state.auth.token;\n\n  // If token exists, inject into Authorization header\n  // Format: \"Bearer <token_value>\"\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Return modified config to proceed with request\n  return config;\n},\n// Error handler for request setup errors (rarely triggered)\nerror => {\n  return Promise.reject(error);\n});\n\n/**\r\n * Response Interceptor\r\n * \r\n * Runs AFTER response is received from server\r\n * Purpose: Handle success responses and process errors globally\r\n * \r\n * Success Flow:\r\n * 1. Response received with status 2xx\r\n * 2. Return response.data directly to caller\r\n * \r\n * Error Handling by Status Code:\r\n * - 400 (Bad Request): Show user-friendly error message\r\n * - 401 (Unauthorized): Token expired - clear auth and redirect to login\r\n * - 403 (Forbidden): User doesn't have permission\r\n * - 404 (Not Found): Resource not found\r\n * - 500+ (Server Error): Server-side error occurred\r\n * \r\n * All errors show notification toast to user via event bus\r\n * \r\n * @param {Object} response - Response object from axios\r\n * @returns {Object} response.data for successful responses\r\n */\napiClient.interceptors.response.use(response => {\n  // Response status is 2xx (200, 201, 204, etc.)\n  // Return response data directly (no error)\n  return response.data;\n},\n// Error handler for failed requests or non-2xx status codes\nerror => {\n  // Extract error information\n  const status = error.response?.status;\n  const message = error.response?.data?.message || error.message;\n\n  // Handle different error types\n  if (status === 400) {\n    // Bad request - usually validation error\n    eventBus.$emit('show-notification', {\n      message: `Bad request: ${message}`,\n      variant: 'warning'\n    });\n  } else if (status === 401) {\n    // Unauthorized - token expired or invalid\n    eventBus.$emit('show-notification', {\n      message: 'Session expired. Please login again.',\n      variant: 'danger'\n    });\n    // Clear auth state and redirect to login\n    store.dispatch('auth/logout');\n  } else if (status === 403) {\n    // Forbidden - user doesn't have permission\n    eventBus.$emit('show-notification', {\n      message: 'You do not have permission to access this resource.',\n      variant: 'danger'\n    });\n  } else if (status === 404) {\n    // Not found - resource doesn't exist\n    eventBus.$emit('show-notification', {\n      message: 'Resource not found.',\n      variant: 'warning'\n    });\n  } else if (status >= 500) {\n    // Server error - 500, 502, 503, etc.\n    eventBus.$emit('show-notification', {\n      message: 'Server error. Please try again later.',\n      variant: 'danger'\n    });\n  } else if (error.code === 'ECONNABORTED') {\n    // Timeout error\n    eventBus.$emit('show-notification', {\n      message: 'Request timeout. Please check your connection.',\n      variant: 'danger'\n    });\n  } else {\n    // Unknown error\n    eventBus.$emit('show-notification', {\n      message: error.message || 'An unexpected error occurred.',\n      variant: 'danger'\n    });\n  }\n\n  // Reject promise to propagate error to component\n  return Promise.reject(error);\n});\n\n// Export configured axios instance for use in apiService.js\nexport default apiClient;","map":{"version":3,"names":["axios","store","eventBus","apiClient","create","baseURL","process","env","VUE_APP_API_URL","timeout","headers","interceptors","request","use","config","token","state","auth","Authorization","error","Promise","reject","response","data","status","message","$emit","variant","dispatch","code"],"sources":["E:/HIRE3X/Training/Day12/project-dashboard/src/services/api.js"],"sourcesContent":["/**\r\n * Axios API Configuration\r\n * \r\n * Central axios instance with global interceptors for:\r\n * 1. Automatic token injection into every request header\r\n * 2. Global error handling and response processing\r\n * 3. Notification system integration for API errors\r\n * \r\n * This configured instance is used by apiService.js for all API calls\r\n * \r\n * Request Flow:\r\n * 1. Request created in apiService.js\r\n * 2. interceptors.request.use() adds auth token\r\n * 3. HTTP request sent to backend\r\n * 4. Response received\r\n * 5. interceptors.response.use() handles response/errors\r\n * 6. Data returned to component or error thrown\r\n * \r\n * Features:\r\n * - Automatic Bearer token injection from Vuex auth store\r\n * - Standardized error handling with HTTP status codes\r\n * - Event bus notifications for API errors\r\n * - Request timeout of 10 seconds\r\n * - JSON content type for all requests\r\n */\r\n\r\nimport axios from 'axios'\r\nimport store from '../store'\r\nimport eventBus from '../bus/eventBus'\r\n\r\n/**\r\n * Create axios instance with default configuration\r\n * All HTTP requests made through apiService.js will use this configured instance\r\n * \r\n * Configuration:\r\n * - baseURL: API endpoint (from environment variable or placeholder)\r\n * - timeout: 10 second timeout per request\r\n * - headers: JSON content type for all requests\r\n */\r\nconst apiClient = axios.create({\r\n  // Base URL for all API requests (use environment variable in production)\r\n  baseURL: process.env.VUE_APP_API_URL || 'https://jsonplaceholder.typicode.com',\r\n  // Request timeout in milliseconds (10 seconds)\r\n  timeout: 10000,\r\n  // Default headers for all requests\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\n/**\r\n * Request Interceptor\r\n * \r\n * Runs BEFORE every request is sent to the server\r\n * Purpose: Add authentication token to request headers\r\n * \r\n * Flow:\r\n * 1. Get token from Vuex auth state\r\n * 2. If token exists, add \"Authorization: Bearer <token>\" header\r\n * 3. Return modified config to proceed with request\r\n * 4. If error occurs before request, reject the promise\r\n * \r\n * @param {Object} config - Request configuration from axios\r\n * @returns {Object} Modified config with Authorization header (if token exists)\r\n */\r\napiClient.interceptors.request.use(\r\n  config => {\r\n    // Retrieve authentication token from Vuex store (auth module)\r\n    const token = store.state.auth.token\r\n    \r\n    // If token exists, inject into Authorization header\r\n    // Format: \"Bearer <token_value>\"\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    \r\n    // Return modified config to proceed with request\r\n    return config\r\n  },\r\n  \r\n  // Error handler for request setup errors (rarely triggered)\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n/**\r\n * Response Interceptor\r\n * \r\n * Runs AFTER response is received from server\r\n * Purpose: Handle success responses and process errors globally\r\n * \r\n * Success Flow:\r\n * 1. Response received with status 2xx\r\n * 2. Return response.data directly to caller\r\n * \r\n * Error Handling by Status Code:\r\n * - 400 (Bad Request): Show user-friendly error message\r\n * - 401 (Unauthorized): Token expired - clear auth and redirect to login\r\n * - 403 (Forbidden): User doesn't have permission\r\n * - 404 (Not Found): Resource not found\r\n * - 500+ (Server Error): Server-side error occurred\r\n * \r\n * All errors show notification toast to user via event bus\r\n * \r\n * @param {Object} response - Response object from axios\r\n * @returns {Object} response.data for successful responses\r\n */\r\napiClient.interceptors.response.use(\r\n  response => {\r\n    // Response status is 2xx (200, 201, 204, etc.)\r\n    // Return response data directly (no error)\r\n    return response.data\r\n  },\r\n  \r\n  // Error handler for failed requests or non-2xx status codes\r\n  error => {\r\n    // Extract error information\r\n    const status = error.response?.status\r\n    const message = error.response?.data?.message || error.message\r\n    \r\n    // Handle different error types\r\n    if (status === 400) {\r\n      // Bad request - usually validation error\r\n      eventBus.$emit('show-notification', {\r\n        message: `Bad request: ${message}`,\r\n        variant: 'warning'\r\n      })\r\n    } else if (status === 401) {\r\n      // Unauthorized - token expired or invalid\r\n      eventBus.$emit('show-notification', {\r\n        message: 'Session expired. Please login again.',\r\n        variant: 'danger'\r\n      })\r\n      // Clear auth state and redirect to login\r\n      store.dispatch('auth/logout')\r\n    } else if (status === 403) {\r\n      // Forbidden - user doesn't have permission\r\n      eventBus.$emit('show-notification', {\r\n        message: 'You do not have permission to access this resource.',\r\n        variant: 'danger'\r\n      })\r\n    } else if (status === 404) {\r\n      // Not found - resource doesn't exist\r\n      eventBus.$emit('show-notification', {\r\n        message: 'Resource not found.',\r\n        variant: 'warning'\r\n      })\r\n    } else if (status >= 500) {\r\n      // Server error - 500, 502, 503, etc.\r\n      eventBus.$emit('show-notification', {\r\n        message: 'Server error. Please try again later.',\r\n        variant: 'danger'\r\n      })\r\n    } else if (error.code === 'ECONNABORTED') {\r\n      // Timeout error\r\n      eventBus.$emit('show-notification', {\r\n        message: 'Request timeout. Please check your connection.',\r\n        variant: 'danger'\r\n      })\r\n    } else {\r\n      // Unknown error\r\n      eventBus.$emit('show-notification', {\r\n        message: error.message || 'An unexpected error occurred.',\r\n        variant: 'danger'\r\n      })\r\n    }\r\n    \r\n    // Reject promise to propagate error to component\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Export configured axios instance for use in apiService.js\r\nexport default apiClient\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,QAAQ,MAAM,iBAAiB;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,SAAS,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC7B;EACAC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,eAAe,IAAI,sCAAsC;EAC9E;EACAC,OAAO,EAAE,KAAK;EACd;EACAC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAP,SAAS,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAChCC,MAAM,IAAI;EACR;EACA,MAAMC,KAAK,GAAGd,KAAK,CAACe,KAAK,CAACC,IAAI,CAACF,KAAK;;EAEpC;EACA;EACA,IAAIA,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;;EAEA;EACA,OAAOD,MAAM;AACf,CAAC;AAED;AACAK,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAhB,SAAS,CAACQ,YAAY,CAACW,QAAQ,CAACT,GAAG,CACjCS,QAAQ,IAAI;EACV;EACA;EACA,OAAOA,QAAQ,CAACC,IAAI;AACtB,CAAC;AAED;AACAJ,KAAK,IAAI;EACP;EACA,MAAMK,MAAM,GAAGL,KAAK,CAACG,QAAQ,EAAEE,MAAM;EACrC,MAAMC,OAAO,GAAGN,KAAK,CAACG,QAAQ,EAAEC,IAAI,EAAEE,OAAO,IAAIN,KAAK,CAACM,OAAO;;EAE9D;EACA,IAAID,MAAM,KAAK,GAAG,EAAE;IAClB;IACAtB,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAE,gBAAgBA,OAAO,EAAE;MAClCE,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIH,MAAM,KAAK,GAAG,EAAE;IACzB;IACAtB,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAE,sCAAsC;MAC/CE,OAAO,EAAE;IACX,CAAC,CAAC;IACF;IACA1B,KAAK,CAAC2B,QAAQ,CAAC,aAAa,CAAC;EAC/B,CAAC,MAAM,IAAIJ,MAAM,KAAK,GAAG,EAAE;IACzB;IACAtB,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAE,qDAAqD;MAC9DE,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIH,MAAM,KAAK,GAAG,EAAE;IACzB;IACAtB,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAE,qBAAqB;MAC9BE,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIH,MAAM,IAAI,GAAG,EAAE;IACxB;IACAtB,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAE,uCAAuC;MAChDE,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIR,KAAK,CAACU,IAAI,KAAK,cAAc,EAAE;IACxC;IACA3B,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAE,gDAAgD;MACzDE,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,MAAM;IACL;IACAzB,QAAQ,CAACwB,KAAK,CAAC,mBAAmB,EAAE;MAClCD,OAAO,EAAEN,KAAK,CAACM,OAAO,IAAI,+BAA+B;MACzDE,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;;EAEA;EACA,OAAOP,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA,eAAehB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}