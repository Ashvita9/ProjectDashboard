{"ast":null,"code":"import axios from 'axios';\nimport store from '../store';\nimport eventBus from '../bus/eventBus';\nconst apiClient = axios.create({\n  baseURL: process.env.VUE_APP_API_URL || 'https://jsonplaceholder.typicode.com',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napiClient.interceptors.request.use(config => {\n  const token = store.state.auth.token;\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\napiClient.interceptors.response.use(response => {\n  return response;\n}, error => {\n  if (error.response) {\n    const status = error.response.status;\n    const message = error.response.data.message || 'An error occurred';\n    switch (status) {\n      case 401:\n        store.dispatch('auth/logout');\n        eventBus.$emit('show-notification', {\n          message: 'Session expired. Please login again.',\n          variant: 'danger'\n        });\n        window.location.href = '/login';\n        break;\n      case 403:\n        eventBus.$emit('show-notification', {\n          message: 'Access forbidden',\n          variant: 'warning'\n        });\n        break;\n      case 404:\n        eventBus.$emit('show-notification', {\n          message: 'Resource not found',\n          variant: 'warning'\n        });\n        break;\n      case 500:\n        eventBus.$emit('show-notification', {\n          message: 'Server error. Please try again later.',\n          variant: 'danger'\n        });\n        break;\n      default:\n        eventBus.$emit('show-notification', {\n          message: message,\n          variant: 'danger'\n        });\n    }\n  } else if (error.request) {\n    eventBus.$emit('show-notification', {\n      message: 'Network error. Please check your connection.',\n      variant: 'danger'\n    });\n  } else {\n    eventBus.$emit('show-notification', {\n      message: error.message,\n      variant: 'danger'\n    });\n  }\n  return Promise.reject(error);\n});\nexport default apiClient;","map":{"version":3,"names":["axios","store","eventBus","apiClient","create","baseURL","process","env","VUE_APP_API_URL","timeout","headers","interceptors","request","use","config","token","state","auth","Authorization","error","Promise","reject","response","status","message","data","dispatch","$emit","variant","window","location","href"],"sources":["E:/HIRE3X/Training/Day12/project-dashboard/src/services/api.js"],"sourcesContent":["import axios from 'axios'\r\nimport store from '../store'\r\nimport eventBus from '../bus/eventBus'\r\n\r\nconst apiClient = axios.create({\r\n  baseURL: process.env.VUE_APP_API_URL || 'https://jsonplaceholder.typicode.com',\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\napiClient.interceptors.request.use(\r\n  config => {\r\n    const token = store.state.auth.token\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\napiClient.interceptors.response.use(\r\n  response => {\r\n    return response\r\n  },\r\n  error => {\r\n    if (error.response) {\r\n      const status = error.response.status\r\n      const message = error.response.data.message || 'An error occurred'\r\n      \r\n      switch (status) {\r\n        case 401:\r\n          store.dispatch('auth/logout')\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Session expired. Please login again.',\r\n            variant: 'danger'\r\n          })\r\n          window.location.href = '/login'\r\n          break\r\n        case 403:\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Access forbidden',\r\n            variant: 'warning'\r\n          })\r\n          break\r\n        case 404:\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Resource not found',\r\n            variant: 'warning'\r\n          })\r\n          break\r\n        case 500:\r\n          eventBus.$emit('show-notification', {\r\n            message: 'Server error. Please try again later.',\r\n            variant: 'danger'\r\n          })\r\n          break\r\n        default:\r\n          eventBus.$emit('show-notification', {\r\n            message: message,\r\n            variant: 'danger'\r\n          })\r\n      }\r\n    } else if (error.request) {\r\n      eventBus.$emit('show-notification', {\r\n        message: 'Network error. Please check your connection.',\r\n        variant: 'danger'\r\n      })\r\n    } else {\r\n      eventBus.$emit('show-notification', {\r\n        message: error.message,\r\n        variant: 'danger'\r\n      })\r\n    }\r\n    \r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default apiClient\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,QAAQ,MAAM,iBAAiB;AAEtC,MAAMC,SAAS,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC7BC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,eAAe,IAAI,sCAAsC;EAC9EC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEFP,SAAS,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAChCC,MAAM,IAAI;EACR,MAAMC,KAAK,GAAGd,KAAK,CAACe,KAAK,CAACC,IAAI,CAACF,KAAK;EACpC,IAAIA,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACDK,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAEDhB,SAAS,CAACQ,YAAY,CAACW,QAAQ,CAACT,GAAG,CACjCS,QAAQ,IAAI;EACV,OAAOA,QAAQ;AACjB,CAAC,EACDH,KAAK,IAAI;EACP,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAClB,MAAMC,MAAM,GAAGJ,KAAK,CAACG,QAAQ,CAACC,MAAM;IACpC,MAAMC,OAAO,GAAGL,KAAK,CAACG,QAAQ,CAACG,IAAI,CAACD,OAAO,IAAI,mBAAmB;IAElE,QAAQD,MAAM;MACZ,KAAK,GAAG;QACNtB,KAAK,CAACyB,QAAQ,CAAC,aAAa,CAAC;QAC7BxB,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;UAClCH,OAAO,EAAE,sCAAsC;UAC/CI,OAAO,EAAE;QACX,CAAC,CAAC;QACFC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;QAC/B;MACF,KAAK,GAAG;QACN7B,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;UAClCH,OAAO,EAAE,kBAAkB;UAC3BI,OAAO,EAAE;QACX,CAAC,CAAC;QACF;MACF,KAAK,GAAG;QACN1B,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;UAClCH,OAAO,EAAE,oBAAoB;UAC7BI,OAAO,EAAE;QACX,CAAC,CAAC;QACF;MACF,KAAK,GAAG;QACN1B,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;UAClCH,OAAO,EAAE,uCAAuC;UAChDI,OAAO,EAAE;QACX,CAAC,CAAC;QACF;MACF;QACE1B,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;UAClCH,OAAO,EAAEA,OAAO;UAChBI,OAAO,EAAE;QACX,CAAC,CAAC;IACN;EACF,CAAC,MAAM,IAAIT,KAAK,CAACP,OAAO,EAAE;IACxBV,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;MAClCH,OAAO,EAAE,8CAA8C;MACvDI,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,MAAM;IACL1B,QAAQ,CAACyB,KAAK,CAAC,mBAAmB,EAAE;MAClCH,OAAO,EAAEL,KAAK,CAACK,OAAO;MACtBI,OAAO,EAAE;IACX,CAAC,CAAC;EACJ;EAEA,OAAOR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAehB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}